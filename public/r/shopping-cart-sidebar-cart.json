{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "shopping-cart-sidebar-cart",
  "type": "registry:block",
  "registryDependencies": [
    "https://ui.woilasoft.com/r/badge.json",
    "https://ui.woilasoft.com/r/button.json",
    "https://ui.woilasoft.com/r/progress.json",
    "https://ui.woilasoft.com/r/separator.json"
  ],
  "files": [
    {
      "path": "registry/default/blocks/shopping-cart-sidebar-cart.tsx",
      "content": "\"use client\";\r\r\n\r\r\nimport { Button } from \"@/registry/default/ui/button\";\r\r\nimport {\r\r\n  Trash2,\r\r\n  Plus,\r\r\n  Minus,\r\r\n  CreditCard,\r\r\n  Package,\r\r\n  X,\r\r\n  ShoppingBag,\r\r\n} from \"lucide-react\";\r\r\nimport Image from \"next/image\";\r\r\nimport { useState } from \"react\";\r\r\nimport { Badge } from \"@/registry/default/ui/badge\";\r\r\nimport { Separator } from \"@/registry/default/ui/separator\";\r\r\nimport { Progress } from \"@/registry/default/ui/progress\";\r\r\n\r\r\ninterface CartItem {\r\r\n  id: string;\r\r\n  name: string;\r\r\n  price: number;\r\r\n  originalPrice?: number;\r\r\n  quantity: number;\r\r\n  image: string;\r\r\n  color: string;\r\r\n  size: string;\r\r\n  stock: number;\r\r\n}\r\r\n\r\r\nexport default function SidebarCart() {\r\r\n  const [items, setItems] = useState<CartItem[]>([\r\r\n    {\r\r\n      id: \"1\",\r\r\n      name: \"Classic Chronograph Watch\",\r\r\n      price: 299.99,\r\r\n      originalPrice: 399.99,\r\r\n      quantity: 1,\r\r\n      image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30\",\r\r\n      color: \"Black\",\r\r\n      size: \"Standard\",\r\r\n      stock: 5,\r\r\n    },\r\r\n    {\r\r\n      id: \"2\",\r\r\n      name: \"Sport Diver Watch\",\r\r\n      price: 199.99,\r\r\n      quantity: 2,\r\r\n      image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30\",\r\r\n      color: \"Blue\",\r\r\n      size: \"Standard\",\r\r\n      stock: 3,\r\r\n    },\r\r\n    {\r\r\n      id: \"3\",\r\r\n      name: \"Leather Strap Watch\",\r\r\n      price: 249.99,\r\r\n      quantity: 1,\r\r\n      image: \"https://images.unsplash.com/photo-1523275335684-37898b6baf30\",\r\r\n      color: \"Brown\",\r\r\n      size: \"Standard\",\r\r\n      stock: 7,\r\r\n    },\r\r\n  ]);\r\r\n\r\r\n  const [isOpen, setIsOpen] = useState(true);\r\r\n\r\r\n  const subtotal = items.reduce(\r\r\n    (sum, item) => sum + item.price * item.quantity,\r\r\n    0,\r\r\n  );\r\r\n  const shipping = subtotal > 200 ? 0 : 5.99;\r\r\n  const total = subtotal + shipping;\r\r\n\r\r\n  // Calculate how close to free shipping\r\r\n  const freeShippingThreshold = 200;\r\r\n  const amountToFreeShipping = Math.max(0, freeShippingThreshold - subtotal);\r\r\n  const freeShippingProgress = Math.min(\r\r\n    100,\r\r\n    (subtotal / freeShippingThreshold) * 100,\r\r\n  );\r\r\n\r\r\n  const updateQuantity = (id: string, change: number) => {\r\r\n    setItems((prev) =>\r\r\n      prev.map((item) => {\r\r\n        if (item.id === id) {\r\r\n          const newQuantity = Math.max(\r\r\n            1,\r\r\n            Math.min(item.stock, item.quantity + change),\r\r\n          );\r\r\n          return { ...item, quantity: newQuantity };\r\r\n        }\r\r\n        return item;\r\r\n      }),\r\r\n    );\r\r\n  };\r\r\n\r\r\n  const removeItem = (id: string) => {\r\r\n    setItems((prev) => prev.filter((item) => item.id !== id));\r\r\n  };\r\r\n\r\r\n  const totalItems = items.reduce((sum, item) => sum + item.quantity, 0);\r\r\n\r\r\n  return (\r\r\n    <>\r\r\n      {/* Height set for example purpose only */}\r\r\n      <div className=\"relative h-[650px] p-6\">\r\r\n        {/* Cart Toggle Button */}\r\r\n        {!isOpen && (\r\r\n          <Button\r\r\n            variant=\"outline\"\r\r\n            size=\"icon\"\r\r\n            className=\"fixed top-6 right-6 z-50\"\r\r\n            onClick={() => setIsOpen(!isOpen)}\r\r\n          >\r\r\n            <div className=\"relative\">\r\r\n              <ShoppingBag className=\"h-5 w-5\" />\r\r\n              {items.length > 0 && (\r\r\n                <Badge\r\r\n                  variant=\"destructive\"\r\r\n                  className=\"absolute -top-2 -right-2 flex h-5 w-5 items-center justify-center p-0\"\r\r\n                >\r\r\n                  {totalItems}\r\r\n                </Badge>\r\r\n              )}\r\r\n            </div>\r\r\n          </Button>\r\r\n        )}\r\r\n\r\r\n        {/* Sidebar Cart */}\r\r\n        <div\r\r\n          className={`bg-background fixed top-0 right-0 z-40 h-full w-80 transform border-l shadow-xl transition-transform duration-300 md:w-96 ${\r\r\n            isOpen ? \"translate-x-0\" : \"translate-x-full\"\r\r\n          }`}\r\r\n        >\r\r\n          <div className=\"flex h-full flex-col\">\r\r\n            {/* Header */}\r\r\n            <div className=\"flex items-center justify-between border-b p-4\">\r\r\n              <div>\r\r\n                <h2 className=\"text-lg font-semibold\">Shopping Cart</h2>\r\r\n                <p className=\"text-muted-foreground text-sm\">\r\r\n                  {totalItems} {totalItems === 1 ? \"item\" : \"items\"}\r\r\n                </p>\r\r\n              </div>\r\r\n              <Button\r\r\n                variant=\"ghost\"\r\r\n                size=\"icon\"\r\r\n                onClick={() => setIsOpen(false)}\r\r\n              >\r\r\n                <X className=\"h-5 w-5\" />\r\r\n              </Button>\r\r\n            </div>\r\r\n\r\r\n            {/* Free Shipping Progress */}\r\r\n            <div className=\"bg-muted/30 px-4 py-3\">\r\r\n              {amountToFreeShipping > 0 ? (\r\r\n                <div className=\"space-y-2\">\r\r\n                  <div className=\"text-sm\">\r\r\n                    Add ${amountToFreeShipping.toFixed(2)} more for free\r\r\n                    shipping\r\r\n                  </div>\r\r\n                  <Progress value={freeShippingProgress} className=\"h-2\" />\r\r\n                </div>\r\r\n              ) : (\r\r\n                <div className=\"text-primary flex items-center gap-2 text-sm\">\r\r\n                  <Package className=\"h-4 w-4\" />\r\r\n                  <span>You&apos;ve unlocked free shipping!</span>\r\r\n                </div>\r\r\n              )}\r\r\n            </div>\r\r\n\r\r\n            {/* Cart Items */}\r\r\n            <div className=\"flex-1 space-y-4 overflow-y-auto p-4\">\r\r\n              {items.map((item) => (\r\r\n                <div\r\r\n                  key={item.id}\r\r\n                  className=\"flex gap-3 border-b pb-4 last:border-0\"\r\r\n                >\r\r\n                  {/* Product Image */}\r\r\n                  <div className=\"relative h-20 w-20 flex-shrink-0 overflow-hidden rounded-md\">\r\r\n                    <Image\r\r\n                      src={item.image}\r\r\n                      alt={item.name}\r\r\n                      fill\r\r\n                      className=\"object-cover\"\r\r\n                      sizes=\"80px\"\r\r\n                    />\r\r\n                  </div>\r\r\n\r\r\n                  {/* Product Details */}\r\r\n                  <div className=\"min-w-0 flex-1\">\r\r\n                    <div className=\"flex justify-between\">\r\r\n                      <div>\r\r\n                        <h3 className=\"truncate pr-6 text-sm font-medium\">\r\r\n                          {item.name}\r\r\n                        </h3>\r\r\n                        <p className=\"text-muted-foreground text-xs\">\r\r\n                          {item.color} â€¢ {item.size}\r\r\n                        </p>\r\r\n                      </div>\r\r\n                      <Button\r\r\n                        variant=\"ghost\"\r\r\n                        size=\"icon\"\r\r\n                        className=\"h-7 w-7\"\r\r\n                        onClick={() => removeItem(item.id)}\r\r\n                      >\r\r\n                        <Trash2 className=\"h-4 w-4\" />\r\r\n                      </Button>\r\r\n                    </div>\r\r\n\r\r\n                    <div className=\"mt-2 flex items-center justify-between\">\r\r\n                      <div className=\"flex items-center gap-1\">\r\r\n                        <Button\r\r\n                          variant=\"outline\"\r\r\n                          size=\"icon\"\r\r\n                          className=\"h-7 w-7\"\r\r\n                          onClick={() => updateQuantity(item.id, -1)}\r\r\n                        >\r\r\n                          <Minus className=\"h-3 w-3\" />\r\r\n                        </Button>\r\r\n                        <span className=\"w-7 text-center text-sm\">\r\r\n                          {item.quantity}\r\r\n                        </span>\r\r\n                        <Button\r\r\n                          variant=\"outline\"\r\r\n                          size=\"icon\"\r\r\n                          className=\"h-7 w-7\"\r\r\n                          onClick={() => updateQuantity(item.id, 1)}\r\r\n                        >\r\r\n                          <Plus className=\"h-3 w-3\" />\r\r\n                        </Button>\r\r\n                      </div>\r\r\n\r\r\n                      <div className=\"text-right\">\r\r\n                        <div className=\"text-sm font-medium\">\r\r\n                          ${(item.price * item.quantity).toFixed(2)}\r\r\n                        </div>\r\r\n                        {item.originalPrice && (\r\r\n                          <div className=\"text-muted-foreground text-xs line-through\">\r\r\n                            ${(item.originalPrice * item.quantity).toFixed(2)}\r\r\n                          </div>\r\r\n                        )}\r\r\n                      </div>\r\r\n                    </div>\r\r\n                  </div>\r\r\n                </div>\r\r\n              ))}\r\r\n            </div>\r\r\n\r\r\n            {/* Order Summary */}\r\r\n            <div className=\"space-y-4 border-t p-4\">\r\r\n              <div className=\"space-y-2\">\r\r\n                <div className=\"flex justify-between text-sm\">\r\r\n                  <span>Subtotal</span>\r\r\n                  <span>${subtotal.toFixed(2)}</span>\r\r\n                </div>\r\r\n                <div className=\"flex justify-between text-sm\">\r\r\n                  <span>Shipping</span>\r\r\n                  <span>\r\r\n                    {shipping === 0 ? \"Free\" : `$${shipping.toFixed(2)}`}\r\r\n                  </span>\r\r\n                </div>\r\r\n                <Separator />\r\r\n                <div className=\"flex justify-between text-lg font-medium\">\r\r\n                  <span>Total</span>\r\r\n                  <span>${total.toFixed(2)}</span>\r\r\n                </div>\r\r\n              </div>\r\r\n\r\r\n              <div className=\"space-y-2\">\r\r\n                <Button className=\"w-full\">\r\r\n                  <CreditCard className=\"mr-2 h-4 w-4\" />\r\r\n                  Checkout\r\r\n                </Button>\r\r\n                <Button variant=\"outline\" className=\"w-full\">\r\r\n                  Continue Shopping\r\r\n                </Button>\r\r\n              </div>\r\r\n            </div>\r\r\n          </div>\r\r\n        </div>\r\r\n      </div>\r\r\n    </>\r\r\n  );\r\r\n}\r\r\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "tags": [
      "shopping-cart"
    ]
  }
}