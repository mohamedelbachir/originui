{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "reset-password-token-reset",
  "type": "registry:block",
  "registryDependencies": [
    "https://ui.woilasoft.com/r/alert.json",
    "https://ui.woilasoft.com/r/button.json",
    "https://ui.woilasoft.com/r/card.json",
    "https://ui.woilasoft.com/r/form.json",
    "https://ui.woilasoft.com/r/input.json"
  ],
  "files": [
    {
      "path": "registry/default/blocks/reset-password-token-reset.tsx",
      "content": "\"use client\";\r\r\n\r\r\nimport * as React from \"react\";\r\r\nimport Link from \"next/link\";\r\r\nimport { z } from \"zod\";\r\r\nimport { useForm } from \"react-hook-form\";\r\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\r\nimport {\r\r\n  ArrowRightIcon,\r\r\n  CheckCircle2Icon,\r\r\n  EyeIcon,\r\r\n  EyeOffIcon,\r\r\n  KeyIcon,\r\r\n  LockIcon,\r\r\n  ShieldIcon,\r\r\n} from \"lucide-react\";\r\r\nimport { Button } from \"@/registry/default/ui/button\";\r\r\nimport {\r\r\n  Card,\r\r\n  CardContent,\r\r\n  CardDescription,\r\r\n  CardFooter,\r\r\n  CardHeader,\r\r\n  CardTitle,\r\r\n} from \"@/registry/default/ui/card\";\r\r\nimport {\r\r\n  Form,\r\r\n  FormControl,\r\r\n  FormDescription,\r\r\n  FormField,\r\r\n  FormItem,\r\r\n  FormLabel,\r\r\n  FormMessage,\r\r\n} from \"@/registry/default/ui/form\";\r\r\nimport { Input } from \"@/registry/default/ui/input\";\r\r\nimport { Alert, AlertDescription } from \"@/registry/default/ui/alert\";\r\r\n\r\r\n// Step 1: Validate Token\r\r\nconst tokenSchema = z.object({\r\r\n  token: z\r\r\n    .string()\r\r\n    .min(6, { message: \"Token must be at least 6 characters\" })\r\r\n    .max(8, { message: \"Token cannot be more than 8 characters\" }),\r\r\n});\r\r\n\r\r\n// Step 2: Set new password\r\r\nconst passwordSchema = z\r\r\n  .object({\r\r\n    password: z\r\r\n      .string()\r\r\n      .min(8, { message: \"Password must be at least 8 characters\" })\r\r\n      .regex(/[A-Z]/, {\r\r\n        message: \"Password must contain at least one uppercase letter\",\r\r\n      })\r\r\n      .regex(/[a-z]/, {\r\r\n        message: \"Password must contain at least one lowercase letter\",\r\r\n      })\r\r\n      .regex(/[0-9]/, { message: \"Password must contain at least one number\" }),\r\r\n    confirmPassword: z.string(),\r\r\n  })\r\r\n  .refine((data) => data.password === data.confirmPassword, {\r\r\n    message: \"Passwords do not match\",\r\r\n    path: [\"confirmPassword\"],\r\r\n  });\r\r\n\r\r\ntype TokenFormValues = z.infer<typeof tokenSchema>;\r\r\ntype PasswordFormValues = z.infer<typeof passwordSchema>;\r\r\n\r\r\nexport default function TokenReset() {\r\r\n  const [step, setStep] = React.useState<\"token\" | \"password\" | \"complete\">(\r\r\n    \"token\",\r\r\n  );\r\r\n  const [isPasswordVisible, setIsPasswordVisible] = React.useState(false);\r\r\n  const [isConfirmPasswordVisible, setIsConfirmPasswordVisible] =\r\r\n    React.useState(false);\r\r\n\r\r\n  // Token form\r\r\n  const tokenForm = useForm<TokenFormValues>({\r\r\n    resolver: zodResolver(tokenSchema),\r\r\n    defaultValues: {\r\r\n      token: \"\",\r\r\n    },\r\r\n  });\r\r\n\r\r\n  // Password form\r\r\n  const passwordForm = useForm<PasswordFormValues>({\r\r\n    resolver: zodResolver(passwordSchema),\r\r\n    defaultValues: {\r\r\n      password: \"\",\r\r\n      confirmPassword: \"\",\r\r\n    },\r\r\n  });\r\r\n\r\r\n  function onSubmitToken(data: TokenFormValues) {\r\r\n    console.log(\"Token submitted:\", data);\r\r\n    setStep(\"password\");\r\r\n  }\r\r\n\r\r\n  function onSubmitPassword(data: PasswordFormValues) {\r\r\n    console.log(\"Password submitted:\", data);\r\r\n    setStep(\"complete\");\r\r\n  }\r\r\n\r\r\n  const togglePasswordVisibility = () => {\r\r\n    setIsPasswordVisible(!isPasswordVisible);\r\r\n  };\r\r\n\r\r\n  const toggleConfirmPasswordVisibility = () => {\r\r\n    setIsConfirmPasswordVisible(!isConfirmPasswordVisible);\r\r\n  };\r\r\n\r\r\n  return (\r\r\n    <div className=\"container mx-auto px-4 py-12 md:px-6 md:py-16\">\r\r\n      <Card className=\"mx-auto max-w-md\">\r\r\n        <CardHeader className=\"space-y-1\">\r\r\n          {step === \"token\" && (\r\r\n            <>\r\r\n              <div className=\"bg-primary/10 mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full\">\r\r\n                <KeyIcon className=\"text-primary h-6 w-6\" />\r\r\n              </div>\r\r\n              <CardTitle className=\"text-center text-2xl\">\r\r\n                Verify Reset Code\r\r\n              </CardTitle>\r\r\n              <CardDescription className=\"text-center\">\r\r\n                Enter the reset code from your email to continue\r\r\n              </CardDescription>\r\r\n            </>\r\r\n          )}\r\r\n\r\r\n          {step === \"password\" && (\r\r\n            <>\r\r\n              <div className=\"bg-primary/10 mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full\">\r\r\n                <LockIcon className=\"text-primary h-6 w-6\" />\r\r\n              </div>\r\r\n              <CardTitle className=\"text-center text-2xl\">\r\r\n                Create New Password\r\r\n              </CardTitle>\r\r\n              <CardDescription className=\"text-center\">\r\r\n                Set a new secure password for your account\r\r\n              </CardDescription>\r\r\n            </>\r\r\n          )}\r\r\n\r\r\n          {step === \"complete\" && (\r\r\n            <>\r\r\n              <div className=\"mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-green-100\">\r\r\n                <CheckCircle2Icon className=\"h-6 w-6 text-green-600\" />\r\r\n              </div>\r\r\n              <CardTitle className=\"text-center text-2xl\">\r\r\n                Password Updated\r\r\n              </CardTitle>\r\r\n              <CardDescription className=\"text-center\">\r\r\n                Your password has been reset successfully\r\r\n              </CardDescription>\r\r\n            </>\r\r\n          )}\r\r\n        </CardHeader>\r\r\n\r\r\n        <CardContent>\r\r\n          {/* Step indicators */}\r\r\n          <div className=\"mb-6 flex items-center justify-center\">\r\r\n            <div className=\"flex w-2/3 items-center\">\r\r\n              <div\r\r\n                className={`flex h-8 w-8 items-center justify-center rounded-full text-xs font-semibold ${step !== \"token\" ? \"bg-primary text-primary-foreground\" : \"border-input bg-background border\"}`}\r\r\n              >\r\r\n                1\r\r\n              </div>\r\r\n              <div\r\r\n                className={`h-1 flex-1 ${step !== \"token\" ? \"bg-primary\" : \"bg-muted\"}`}\r\r\n              ></div>\r\r\n              <div\r\r\n                className={`flex h-8 w-8 items-center justify-center rounded-full text-xs font-semibold ${step === \"complete\" ? \"bg-primary text-primary-foreground\" : \"border-input bg-background border\"}`}\r\r\n              >\r\r\n                2\r\r\n              </div>\r\r\n              <div\r\r\n                className={`h-1 flex-1 ${step === \"complete\" ? \"bg-primary\" : \"bg-muted\"}`}\r\r\n              ></div>\r\r\n              <div\r\r\n                className={`flex h-8 w-8 items-center justify-center rounded-full text-xs font-semibold ${step === \"complete\" ? \"bg-primary text-primary-foreground\" : \"border-input bg-background border\"}`}\r\r\n              >\r\r\n                3\r\r\n              </div>\r\r\n            </div>\r\r\n          </div>\r\r\n\r\r\n          {step === \"token\" && (\r\r\n            <Form {...tokenForm}>\r\r\n              <form\r\r\n                onSubmit={tokenForm.handleSubmit(onSubmitToken)}\r\r\n                className=\"space-y-4\"\r\r\n              >\r\r\n                <FormField\r\r\n                  control={tokenForm.control}\r\r\n                  name=\"token\"\r\r\n                  render={({ field }) => (\r\r\n                    <FormItem>\r\r\n                      <FormLabel>Reset Code</FormLabel>\r\r\n                      <FormControl>\r\r\n                        <Input\r\r\n                          placeholder=\"Enter reset code\"\r\r\n                          {...field}\r\r\n                          className=\"text-center text-lg tracking-widest\"\r\r\n                        />\r\r\n                      </FormControl>\r\r\n                      <FormDescription>\r\r\n                        Check your email for a 6-8 character code we sent you\r\r\n                      </FormDescription>\r\r\n                      <FormMessage />\r\r\n                    </FormItem>\r\r\n                  )}\r\r\n                />\r\r\n                <Button type=\"submit\" className=\"w-full\">\r\r\n                  Verify Code <ArrowRightIcon className=\"ml-2 h-4 w-4\" />\r\r\n                </Button>\r\r\n              </form>\r\r\n            </Form>\r\r\n          )}\r\r\n\r\r\n          {step === \"password\" && (\r\r\n            <Form {...passwordForm}>\r\r\n              <form\r\r\n                onSubmit={passwordForm.handleSubmit(onSubmitPassword)}\r\r\n                className=\"space-y-4\"\r\r\n              >\r\r\n                <Alert className=\"mb-4 bg-blue-50 text-blue-800 dark:bg-blue-900 dark:text-blue-300\">\r\r\n                  <ShieldIcon className=\"h-4 w-4\" />\r\r\n                  <AlertDescription>\r\r\n                    Your identity has been verified. Now create a new secure\r\r\n                    password.\r\r\n                  </AlertDescription>\r\r\n                </Alert>\r\r\n\r\r\n                <FormField\r\r\n                  control={passwordForm.control}\r\r\n                  name=\"password\"\r\r\n                  render={({ field }) => (\r\r\n                    <FormItem>\r\r\n                      <FormLabel>New Password</FormLabel>\r\r\n                      <div className=\"relative\">\r\r\n                        <FormControl>\r\r\n                          <Input\r\r\n                            placeholder=\"••••••••\"\r\r\n                            type={isPasswordVisible ? \"text\" : \"password\"}\r\r\n                            {...field}\r\r\n                          />\r\r\n                        </FormControl>\r\r\n                        <Button\r\r\n                          type=\"button\"\r\r\n                          variant=\"ghost\"\r\r\n                          size=\"icon\"\r\r\n                          className=\"text-muted-foreground absolute top-0 right-0 h-full px-3 py-2 hover:bg-transparent dark:hover:bg-transparent\"\r\r\n                          onClick={togglePasswordVisibility}\r\r\n                        >\r\r\n                          {isPasswordVisible ? (\r\r\n                            <EyeOffIcon className=\"h-4 w-4\" />\r\r\n                          ) : (\r\r\n                            <EyeIcon className=\"h-4 w-4\" />\r\r\n                          )}\r\r\n                          <span className=\"sr-only\">\r\r\n                            Toggle password visibility\r\r\n                          </span>\r\r\n                        </Button>\r\r\n                      </div>\r\r\n                      <FormDescription>\r\r\n                        Must have at least 8 characters with uppercase,\r\r\n                        lowercase, and number\r\r\n                      </FormDescription>\r\r\n                      <FormMessage />\r\r\n                    </FormItem>\r\r\n                  )}\r\r\n                />\r\r\n\r\r\n                <FormField\r\r\n                  control={passwordForm.control}\r\r\n                  name=\"confirmPassword\"\r\r\n                  render={({ field }) => (\r\r\n                    <FormItem>\r\r\n                      <FormLabel>Confirm Password</FormLabel>\r\r\n                      <div className=\"relative\">\r\r\n                        <FormControl>\r\r\n                          <Input\r\r\n                            placeholder=\"••••••••\"\r\r\n                            type={\r\r\n                              isConfirmPasswordVisible ? \"text\" : \"password\"\r\r\n                            }\r\r\n                            {...field}\r\r\n                          />\r\r\n                        </FormControl>\r\r\n                        <Button\r\r\n                          type=\"button\"\r\r\n                          variant=\"ghost\"\r\r\n                          size=\"icon\"\r\r\n                          className=\"text-muted-foreground absolute top-0 right-0 h-full px-3 py-2 hover:bg-transparent dark:hover:bg-transparent\"\r\r\n                          onClick={toggleConfirmPasswordVisibility}\r\r\n                        >\r\r\n                          {isConfirmPasswordVisible ? (\r\r\n                            <EyeOffIcon className=\"h-4 w-4\" />\r\r\n                          ) : (\r\r\n                            <EyeIcon className=\"h-4 w-4\" />\r\r\n                          )}\r\r\n                          <span className=\"sr-only\">\r\r\n                            Toggle confirm password visibility\r\r\n                          </span>\r\r\n                        </Button>\r\r\n                      </div>\r\r\n                      <FormMessage />\r\r\n                    </FormItem>\r\r\n                  )}\r\r\n                />\r\r\n\r\r\n                <Button type=\"submit\" className=\"w-full\">\r\r\n                  Reset Password\r\r\n                </Button>\r\r\n              </form>\r\r\n            </Form>\r\r\n          )}\r\r\n\r\r\n          {step === \"complete\" && (\r\r\n            <div className=\"space-y-4 text-center\">\r\r\n              <div className=\"rounded-lg bg-green-50 p-4 dark:bg-green-900\">\r\r\n                <p className=\"text-green-800 dark:text-green-300\">\r\r\n                  Your password has been successfully reset. Your account is now\r\r\n                  secure.\r\r\n                </p>\r\r\n              </div>\r\r\n              <Button asChild className=\"w-full\">\r\r\n                <Link href=\"#\">Sign in with new password</Link>\r\r\n              </Button>\r\r\n            </div>\r\r\n          )}\r\r\n        </CardContent>\r\r\n\r\r\n        <CardFooter className=\"flex justify-center\">\r\r\n          {step !== \"complete\" && (\r\r\n            <p className=\"text-muted-foreground text-sm\">\r\r\n              Remember your password?{\" \"}\r\r\n              <Link href=\"#\" className=\"text-primary underline\">\r\r\n                Sign in\r\r\n              </Link>\r\r\n            </p>\r\r\n          )}\r\r\n\r\r\n          {step === \"complete\" && (\r\r\n            <p className=\"text-muted-foreground text-sm\">\r\r\n              Need help?{\" \"}\r\r\n              <Link href=\"#\" className=\"text-primary underline\">\r\r\n                Contact support\r\r\n              </Link>\r\r\n            </p>\r\r\n          )}\r\r\n        </CardFooter>\r\r\n      </Card>\r\r\n    </div>\r\r\n  );\r\r\n}\r\r\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "tags": [
      "reset-password"
    ]
  }
}