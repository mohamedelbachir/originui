{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "changelogs-table-changelog",
  "type": "registry:block",
  "registryDependencies": [
    "https://ui.woilasoft.com/r/badge.json",
    "https://ui.woilasoft.com/r/button.json",
    "https://ui.woilasoft.com/r/input.json",
    "https://ui.woilasoft.com/r/select.json",
    "https://ui.woilasoft.com/r/table.json"
  ],
  "files": [
    {
      "path": "registry/default/blocks/changelogs-table-changelog.tsx",
      "content": "\"use client\";\r\r\n\r\r\nimport * as React from \"react\";\r\r\nimport {\r\r\n  Table,\r\r\n  TableBody,\r\r\n  TableCell,\r\r\n  TableHead,\r\r\n  TableHeader,\r\r\n  TableRow,\r\r\n} from \"@/registry/default/ui/table\";\r\r\nimport { Badge } from \"@/registry/default/ui/badge\";\r\r\nimport { Input } from \"@/registry/default/ui/input\";\r\r\nimport {\r\r\n  Select,\r\r\n  SelectContent,\r\r\n  SelectItem,\r\r\n  SelectTrigger,\r\r\n  SelectValue,\r\r\n} from \"@/registry/default/ui/select\";\r\r\nimport {\r\r\n  ChevronDownIcon,\r\r\n  ChevronUpIcon,\r\r\n  SearchIcon,\r\r\n  FilterIcon,\r\r\n} from \"lucide-react\";\r\r\nimport { Button } from \"@/registry/default/ui/button\";\r\r\n\r\r\ntype ChangeType = \"feature\" | \"improvement\" | \"bugfix\" | \"breaking\";\r\r\n\r\r\ninterface Change {\r\r\n  id: string;\r\r\n  version: string;\r\r\n  date: string;\r\r\n  type: ChangeType;\r\r\n  description: string;\r\r\n}\r\r\n\r\r\nconst typeLabels: Record<ChangeType, string> = {\r\r\n  feature: \"Feature\",\r\r\n  improvement: \"Improvement\",\r\r\n  bugfix: \"Bug Fix\",\r\r\n  breaking: \"Breaking Change\",\r\r\n};\r\r\n\r\r\nconst typeColors: Record<ChangeType, string> = {\r\r\n  feature:\r\r\n    \"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400\",\r\r\n  improvement:\r\r\n    \"bg-blue-100 text-blue-800 dark:bg-blue-900/30 dark:text-blue-400\",\r\r\n  bugfix: \"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-400\",\r\r\n  breaking:\r\r\n    \"bg-amber-100 text-amber-800 dark:bg-amber-900/30 dark:text-amber-400\",\r\r\n};\r\r\n\r\r\nexport default function TableChangelog() {\r\r\n  const [searchQuery, setSearchQuery] = React.useState(\"\");\r\r\n  const [typeFilter, setTypeFilter] = React.useState<string>(\"all\");\r\r\n  const [sortConfig, setSortConfig] = React.useState<{\r\r\n    key: keyof Change;\r\r\n    direction: \"ascending\" | \"descending\";\r\r\n  }>({\r\r\n    key: \"date\",\r\r\n    direction: \"descending\",\r\r\n  });\r\r\n\r\r\n  // Sample changelog data\r\r\n  const changes: Change[] = [\r\r\n    {\r\r\n      id: \"1\",\r\r\n      version: \"2.0.0\",\r\r\n      date: \"2023-04-15\",\r\r\n      type: \"feature\",\r\r\n      description: \"Completely redesigned dashboard interface\",\r\r\n    },\r\r\n    {\r\r\n      id: \"2\",\r\r\n      version: \"2.0.0\",\r\r\n      date: \"2023-04-15\",\r\r\n      type: \"feature\",\r\r\n      description: \"Added dark mode support across all pages\",\r\r\n    },\r\r\n    {\r\r\n      id: \"3\",\r\r\n      version: \"2.0.0\",\r\r\n      date: \"2023-04-15\",\r\r\n      type: \"improvement\",\r\r\n      description: \"Improved performance by 40%\",\r\r\n    },\r\r\n    {\r\r\n      id: \"4\",\r\r\n      version: \"2.0.0\",\r\r\n      date: \"2023-04-15\",\r\r\n      type: \"bugfix\",\r\r\n      description: \"Fixed multiple accessibility issues\",\r\r\n    },\r\r\n    {\r\r\n      id: \"5\",\r\r\n      version: \"2.0.0\",\r\r\n      date: \"2023-04-15\",\r\r\n      type: \"breaking\",\r\r\n      description: \"API endpoints restructured for v2\",\r\r\n    },\r\r\n    {\r\r\n      id: \"6\",\r\r\n      version: \"1.2.0\",\r\r\n      date: \"2023-03-02\",\r\r\n      type: \"feature\",\r\r\n      description: \"Added new analytics dashboard\",\r\r\n    },\r\r\n    {\r\r\n      id: \"7\",\r\r\n      version: \"1.2.0\",\r\r\n      date: \"2023-03-02\",\r\r\n      type: \"improvement\",\r\r\n      description: \"Enhanced mobile responsiveness\",\r\r\n    },\r\r\n    {\r\r\n      id: \"8\",\r\r\n      version: \"1.2.0\",\r\r\n      date: \"2023-03-02\",\r\r\n      type: \"bugfix\",\r\r\n      description: \"Fixed bug with user authentication\",\r\r\n    },\r\r\n    {\r\r\n      id: \"9\",\r\r\n      version: \"1.1.0\",\r\r\n      date: \"2023-01-15\",\r\r\n      type: \"feature\",\r\r\n      description: \"Added support for custom themes\",\r\r\n    },\r\r\n    {\r\r\n      id: \"10\",\r\r\n      version: \"1.1.0\",\r\r\n      date: \"2023-01-15\",\r\r\n      type: \"improvement\",\r\r\n      description: \"Improved form validation\",\r\r\n    },\r\r\n  ];\r\r\n\r\r\n  // Format date for display\r\r\n  const formatDate = (dateString: string) => {\r\r\n    return new Date(dateString).toLocaleDateString(\"en-US\", {\r\r\n      year: \"numeric\",\r\r\n      month: \"long\",\r\r\n      day: \"numeric\",\r\r\n    });\r\r\n  };\r\r\n\r\r\n  // Handle sorting\r\r\n  const requestSort = (key: keyof Change) => {\r\r\n    let direction: \"ascending\" | \"descending\" = \"ascending\";\r\r\n    if (sortConfig.key === key && sortConfig.direction === \"ascending\") {\r\r\n      direction = \"descending\";\r\r\n    }\r\r\n    setSortConfig({ key, direction });\r\r\n  };\r\r\n\r\r\n  // Apply sorting and filtering\r\r\n  const sortedAndFilteredChanges = React.useMemo(() => {\r\r\n    let filteredData = [...changes];\r\r\n\r\r\n    // Apply type filter\r\r\n    if (typeFilter !== \"all\") {\r\r\n      filteredData = filteredData.filter((item) => item.type === typeFilter);\r\r\n    }\r\r\n\r\r\n    // Apply search filter\r\r\n    if (searchQuery) {\r\r\n      const lowerCaseQuery = searchQuery.toLowerCase();\r\r\n      filteredData = filteredData.filter(\r\r\n        (item) =>\r\r\n          item.description.toLowerCase().includes(lowerCaseQuery) ||\r\r\n          item.version.toLowerCase().includes(lowerCaseQuery),\r\r\n      );\r\r\n    }\r\r\n\r\r\n    // Apply sorting\r\r\n    filteredData.sort((a, b) => {\r\r\n      if (a[sortConfig.key] < b[sortConfig.key]) {\r\r\n        return sortConfig.direction === \"ascending\" ? -1 : 1;\r\r\n      }\r\r\n      if (a[sortConfig.key] > b[sortConfig.key]) {\r\r\n        return sortConfig.direction === \"ascending\" ? 1 : -1;\r\r\n      }\r\r\n      return 0;\r\r\n    });\r\r\n\r\r\n    return filteredData;\r\r\n  }, [changes, sortConfig, typeFilter, searchQuery]);\r\r\n\r\r\n  // Group changes by version for displaying version badges\r\r\n  const isFirstOfVersion = (change: Change, index: number): boolean => {\r\r\n    if (index === 0) return true;\r\r\n    return change.version !== sortedAndFilteredChanges[index - 1].version;\r\r\n  };\r\r\n\r\r\n  // Render sort indicator\r\r\n  const renderSortIndicator = (key: keyof Change) => {\r\r\n    if (sortConfig.key !== key) return null;\r\r\n    return sortConfig.direction === \"ascending\" ? (\r\r\n      <ChevronUpIcon className=\"ml-1 h-4 w-4\" />\r\r\n    ) : (\r\r\n      <ChevronDownIcon className=\"ml-1 h-4 w-4\" />\r\r\n    );\r\r\n  };\r\r\n\r\r\n  return (\r\r\n    <div className=\"container mx-auto space-y-6 px-4 py-8\">\r\r\n      <div>\r\r\n        <h2 className=\"text-3xl font-bold tracking-tight\">Changelog</h2>\r\r\n        <p className=\"text-muted-foreground mt-2\">\r\r\n          Track all changes across versions\r\r\n        </p>\r\r\n      </div>\r\r\n\r\r\n      <div className=\"flex flex-col gap-4 md:flex-row md:items-center\">\r\r\n        <div className=\"relative flex-1\">\r\r\n          <SearchIcon className=\"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2\" />\r\r\n          <Input\r\r\n            placeholder=\"Search changes...\"\r\r\n            value={searchQuery}\r\r\n            onChange={(e) => setSearchQuery(e.target.value)}\r\r\n            className=\"pl-10\"\r\r\n          />\r\r\n        </div>\r\r\n        <div className=\"w-full md:w-[180px]\">\r\r\n          <Select value={typeFilter} onValueChange={setTypeFilter}>\r\r\n            <SelectTrigger>\r\r\n              <span className=\"flex items-center\">\r\r\n                <FilterIcon className=\"mr-2 h-4 w-4\" />\r\r\n                <SelectValue placeholder=\"All types\" />\r\r\n              </span>\r\r\n            </SelectTrigger>\r\r\n            <SelectContent>\r\r\n              <SelectItem value=\"all\">All types</SelectItem>\r\r\n              <SelectItem value=\"feature\">Features</SelectItem>\r\r\n              <SelectItem value=\"improvement\">Improvements</SelectItem>\r\r\n              <SelectItem value=\"bugfix\">Bug Fixes</SelectItem>\r\r\n              <SelectItem value=\"breaking\">Breaking Changes</SelectItem>\r\r\n            </SelectContent>\r\r\n          </Select>\r\r\n        </div>\r\r\n      </div>\r\r\n\r\r\n      <div className=\"rounded-md border\">\r\r\n        <Table>\r\r\n          <TableHeader>\r\r\n            <TableRow>\r\r\n              <TableHead className=\"w-[120px]\">\r\r\n                <Button\r\r\n                  variant=\"ghost\"\r\r\n                  className=\"flex h-8 items-center px-2 text-xs font-semibold\"\r\r\n                  onClick={() => requestSort(\"version\")}\r\r\n                >\r\r\n                  Version\r\r\n                  {renderSortIndicator(\"version\")}\r\r\n                </Button>\r\r\n              </TableHead>\r\r\n              <TableHead className=\"w-[180px]\">\r\r\n                <Button\r\r\n                  variant=\"ghost\"\r\r\n                  className=\"flex h-8 items-center px-2 text-xs font-semibold\"\r\r\n                  onClick={() => requestSort(\"date\")}\r\r\n                >\r\r\n                  Date\r\r\n                  {renderSortIndicator(\"date\")}\r\r\n                </Button>\r\r\n              </TableHead>\r\r\n              <TableHead className=\"w-[150px]\">\r\r\n                <Button\r\r\n                  variant=\"ghost\"\r\r\n                  className=\"flex h-8 items-center px-2 text-xs font-semibold\"\r\r\n                  onClick={() => requestSort(\"type\")}\r\r\n                >\r\r\n                  Type\r\r\n                  {renderSortIndicator(\"type\")}\r\r\n                </Button>\r\r\n              </TableHead>\r\r\n              <TableHead>\r\r\n                <Button\r\r\n                  variant=\"ghost\"\r\r\n                  className=\"flex h-8 items-center px-2 text-xs font-semibold\"\r\r\n                  onClick={() => requestSort(\"description\")}\r\r\n                >\r\r\n                  Change\r\r\n                  {renderSortIndicator(\"description\")}\r\r\n                </Button>\r\r\n              </TableHead>\r\r\n            </TableRow>\r\r\n          </TableHeader>\r\r\n          <TableBody>\r\r\n            {sortedAndFilteredChanges.length === 0 ? (\r\r\n              <TableRow>\r\r\n                <TableCell\r\r\n                  colSpan={4}\r\r\n                  className=\"text-muted-foreground h-24 text-center\"\r\r\n                >\r\r\n                  No changes found.\r\r\n                </TableCell>\r\r\n              </TableRow>\r\r\n            ) : (\r\r\n              sortedAndFilteredChanges.map((change, index) => (\r\r\n                <TableRow key={change.id}>\r\r\n                  <TableCell className=\"py-3 font-medium\">\r\r\n                    {isFirstOfVersion(change, index) && (\r\r\n                      <div className=\"flex items-center gap-2\">\r\r\n                        v{change.version}\r\r\n                        {change.version === \"2.0.0\" && (\r\r\n                          <Badge variant=\"outline\" className=\"text-[10px]\">\r\r\n                            Latest\r\r\n                          </Badge>\r\r\n                        )}\r\r\n                      </div>\r\r\n                    )}\r\r\n                  </TableCell>\r\r\n                  <TableCell className=\"text-muted-foreground py-3\">\r\r\n                    {isFirstOfVersion(change, index) && formatDate(change.date)}\r\r\n                  </TableCell>\r\r\n                  <TableCell className=\"py-3\">\r\r\n                    <Badge\r\r\n                      variant=\"outline\"\r\r\n                      className={`${typeColors[change.type]} border-transparent text-xs capitalize`}\r\r\n                    >\r\r\n                      {typeLabels[change.type]}\r\r\n                    </Badge>\r\r\n                  </TableCell>\r\r\n                  <TableCell className=\"py-3\">{change.description}</TableCell>\r\r\n                </TableRow>\r\r\n              ))\r\r\n            )}\r\r\n          </TableBody>\r\r\n        </Table>\r\r\n      </div>\r\r\n    </div>\r\r\n  );\r\r\n}\r\r\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "tags": [
      "changelogs"
    ]
  }
}