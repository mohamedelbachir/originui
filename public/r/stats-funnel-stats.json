{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "stats-funnel-stats",
  "type": "registry:block",
  "registryDependencies": [
    "https://ui.woilasoft.com/r/badge.json",
    "https://ui.woilasoft.com/r/button.json",
    "https://ui.woilasoft.com/r/card.json",
    "https://ui.woilasoft.com/r/tabs.json"
  ],
  "files": [
    {
      "path": "registry/default/blocks/stats-funnel-stats.tsx",
      "content": "\"use client\";\r\r\n\r\r\nimport { Badge } from \"@/registry/default/ui/badge\";\r\r\nimport { Button } from \"@/registry/default/ui/button\";\r\r\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/registry/default/ui/card\";\r\r\nimport { Tabs, TabsList, TabsTrigger } from \"@/registry/default/ui/tabs\";\r\r\nimport { cn } from \"@/lib/utils\";\r\r\nimport { useState } from \"react\";\r\r\n\r\r\ntype FunnelStage = {\r\r\n  id: string;\r\r\n  name: string;\r\r\n  color: string;\r\r\n  value: number;\r\r\n  formatted: string;\r\r\n  dropoff: number;\r\r\n  dropoffFormatted: string;\r\r\n};\r\r\n\r\r\ntype FunnelType = \"marketing\" | \"onboarding\" | \"checkout\";\r\r\n\r\r\ntype FunnelData = {\r\r\n  [key in FunnelType]: {\r\r\n    title: string;\r\r\n    description: string;\r\r\n    stages: FunnelStage[];\r\r\n    metrics: {\r\r\n      conversionRate: string;\r\r\n      dropoffPoint: string;\r\r\n      totalOpportunity: string;\r\r\n    };\r\r\n  };\r\r\n};\r\r\n\r\r\nexport default function FunnelStats() {\r\r\n  const [funnelType, setFunnelType] = useState<FunnelType>(\"marketing\");\r\r\n\r\r\n  // Sample data for different funnel types\r\r\n  const funnelData: FunnelData = {\r\r\n    marketing: {\r\r\n      title: \"Marketing Funnel\",\r\r\n      description: \"How visitors convert through our marketing pipeline\",\r\r\n      stages: [\r\r\n        {\r\r\n          id: \"visitors\",\r\r\n          name: \"Website Visitors\",\r\r\n          color: \"bg-blue-500\",\r\r\n          value: 124862,\r\r\n          formatted: \"124,862\",\r\r\n          dropoff: 0,\r\r\n          dropoffFormatted: \"0%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"leads\",\r\r\n          name: \"Lead Capture\",\r\r\n          color: \"bg-indigo-500\",\r\r\n          value: 32845,\r\r\n          formatted: \"32,845\",\r\r\n          dropoff: 73.7,\r\r\n          dropoffFormatted: \"73.7%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"mql\",\r\r\n          name: \"Marketing Qualified\",\r\r\n          color: \"bg-violet-500\",\r\r\n          value: 12462,\r\r\n          formatted: \"12,462\",\r\r\n          dropoff: 62.1,\r\r\n          dropoffFormatted: \"62.1%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"sql\",\r\r\n          name: \"Sales Qualified\",\r\r\n          color: \"bg-purple-500\",\r\r\n          value: 4628,\r\r\n          formatted: \"4,628\",\r\r\n          dropoff: 62.9,\r\r\n          dropoffFormatted: \"62.9%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"opportunities\",\r\r\n          name: \"Opportunities\",\r\r\n          color: \"bg-fuchsia-500\",\r\r\n          value: 1842,\r\r\n          formatted: \"1,842\",\r\r\n          dropoff: 60.2,\r\r\n          dropoffFormatted: \"60.2%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"customers\",\r\r\n          name: \"Customers\",\r\r\n          color: \"bg-pink-500\",\r\r\n          value: 684,\r\r\n          formatted: \"684\",\r\r\n          dropoff: 62.9,\r\r\n          dropoffFormatted: \"62.9%\",\r\r\n        },\r\r\n      ],\r\r\n      metrics: {\r\r\n        conversionRate: \"0.55%\",\r\r\n        dropoffPoint: \"Lead Capture (73.7%)\",\r\r\n        totalOpportunity: \"$1.24M\",\r\r\n      },\r\r\n    },\r\r\n    onboarding: {\r\r\n      title: \"User Onboarding\",\r\r\n      description: \"How new users complete the onboarding process\",\r\r\n      stages: [\r\r\n        {\r\r\n          id: \"signups\",\r\r\n          name: \"New Sign-ups\",\r\r\n          color: \"bg-emerald-500\",\r\r\n          value: 8426,\r\r\n          formatted: \"8,426\",\r\r\n          dropoff: 0,\r\r\n          dropoffFormatted: \"0%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"profile\",\r\r\n          name: \"Profile Completion\",\r\r\n          color: \"bg-green-500\",\r\r\n          value: 6842,\r\r\n          formatted: \"6,842\",\r\r\n          dropoff: 18.8,\r\r\n          dropoffFormatted: \"18.8%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"education\",\r\r\n          name: \"Education Steps\",\r\r\n          color: \"bg-lime-500\",\r\r\n          value: 5124,\r\r\n          formatted: \"5,124\",\r\r\n          dropoff: 25.1,\r\r\n          dropoffFormatted: \"25.1%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"integration\",\r\r\n          name: \"Integration Setup\",\r\r\n          color: \"bg-yellow-500\",\r\r\n          value: 3845,\r\r\n          formatted: \"3,845\",\r\r\n          dropoff: 25.0,\r\r\n          dropoffFormatted: \"25.0%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"teammates\",\r\r\n          name: \"Team Invites\",\r\r\n          color: \"bg-amber-500\",\r\r\n          value: 2546,\r\r\n          formatted: \"2,546\",\r\r\n          dropoff: 33.8,\r\r\n          dropoffFormatted: \"33.8%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"activated\",\r\r\n          name: \"Fully Activated\",\r\r\n          color: \"bg-orange-500\",\r\r\n          value: 1982,\r\r\n          formatted: \"1,982\",\r\r\n          dropoff: 22.2,\r\r\n          dropoffFormatted: \"22.2%\",\r\r\n        },\r\r\n      ],\r\r\n      metrics: {\r\r\n        conversionRate: \"23.5%\",\r\r\n        dropoffPoint: \"Team Invites (33.8%)\",\r\r\n        totalOpportunity: \"6,444 users\",\r\r\n      },\r\r\n    },\r\r\n    checkout: {\r\r\n      title: \"Checkout Process\",\r\r\n      description: \"How users navigate through our checkout flow\",\r\r\n      stages: [\r\r\n        {\r\r\n          id: \"cart\",\r\r\n          name: \"Add to Cart\",\r\r\n          color: \"bg-cyan-500\",\r\r\n          value: 15842,\r\r\n          formatted: \"15,842\",\r\r\n          dropoff: 0,\r\r\n          dropoffFormatted: \"0%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"checkout\",\r\r\n          name: \"Begin Checkout\",\r\r\n          color: \"bg-sky-500\",\r\r\n          value: 8426,\r\r\n          formatted: \"8,426\",\r\r\n          dropoff: 46.8,\r\r\n          dropoffFormatted: \"46.8%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"shipping\",\r\r\n          name: \"Shipping Info\",\r\r\n          color: \"bg-blue-500\",\r\r\n          value: 6284,\r\r\n          formatted: \"6,284\",\r\r\n          dropoff: 25.4,\r\r\n          dropoffFormatted: \"25.4%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"payment\",\r\r\n          name: \"Payment Info\",\r\r\n          color: \"bg-indigo-500\",\r\r\n          value: 4624,\r\r\n          formatted: \"4,624\",\r\r\n          dropoff: 26.4,\r\r\n          dropoffFormatted: \"26.4%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"review\",\r\r\n          name: \"Order Review\",\r\r\n          color: \"bg-violet-500\",\r\r\n          value: 3946,\r\r\n          formatted: \"3,946\",\r\r\n          dropoff: 14.7,\r\r\n          dropoffFormatted: \"14.7%\",\r\r\n        },\r\r\n        {\r\r\n          id: \"purchase\",\r\r\n          name: \"Purchase Complete\",\r\r\n          color: \"bg-purple-500\",\r\r\n          value: 3248,\r\r\n          formatted: \"3,248\",\r\r\n          dropoff: 17.7,\r\r\n          dropoffFormatted: \"17.7%\",\r\r\n        },\r\r\n      ],\r\r\n      metrics: {\r\r\n        conversionRate: \"20.5%\",\r\r\n        dropoffPoint: \"Begin Checkout (46.8%)\",\r\r\n        totalOpportunity: \"$394,850\",\r\r\n      },\r\r\n    },\r\r\n  };\r\r\n\r\r\n  const currentFunnel = funnelData[funnelType];\r\r\n\r\r\n  // Calculate the max value for scaling\r\r\n  const maxValue = Math.max(\r\r\n    ...currentFunnel.stages.map((stage) => stage.value),\r\r\n  );\r\r\n\r\r\n  return (\r\r\n    <div className=\"container mx-auto px-4 py-24 md:px-6 lg:py-32 2xl:max-w-[1400px]\">\r\r\n      <div className=\"mx-auto max-w-5xl\">\r\r\n        <div className=\"mb-12 text-center\">\r\r\n          <Badge className=\"mb-2\">Analytics</Badge>\r\r\n          <h2 className=\"text-3xl font-bold md:text-4xl\">Conversion Funnel</h2>\r\r\n          <p className=\"text-muted-foreground mx-auto mt-3 max-w-2xl\">\r\r\n            Visualize how users progress through key business processes\r\r\n          </p>\r\r\n        </div>\r\r\n\r\r\n        {/* Funnel Type Selector */}\r\r\n        <div className=\"mb-10 flex justify-center\">\r\r\n          <Tabs\r\r\n            defaultValue=\"marketing\"\r\r\n            value={funnelType}\r\r\n            onValueChange={(value) => setFunnelType(value as FunnelType)}\r\r\n            className=\"w-full max-w-md\"\r\r\n          >\r\r\n            <TabsList className=\"grid w-full grid-cols-3\">\r\r\n              <TabsTrigger value=\"marketing\">Marketing</TabsTrigger>\r\r\n              <TabsTrigger value=\"onboarding\">Onboarding</TabsTrigger>\r\r\n              <TabsTrigger value=\"checkout\">Checkout</TabsTrigger>\r\r\n            </TabsList>\r\r\n          </Tabs>\r\r\n        </div>\r\r\n\r\r\n        {/* Funnel Visualization */}\r\r\n        <div className=\"mb-8\">\r\r\n          <Card>\r\r\n            <CardHeader>\r\r\n              <CardTitle>{currentFunnel.title}</CardTitle>\r\r\n              <p className=\"text-muted-foreground text-sm\">\r\r\n                {currentFunnel.description}\r\r\n              </p>\r\r\n            </CardHeader>\r\r\n            <CardContent>\r\r\n              <div className=\"flex flex-col items-center space-y-2\">\r\r\n                {currentFunnel.stages.map((stage, index) => (\r\r\n                  <div key={stage.id} className=\"w-full\">\r\r\n                    <div className=\"mb-1 flex items-center justify-between\">\r\r\n                      <span className=\"text-sm font-medium\">{stage.name}</span>\r\r\n                      <div className=\"text-sm tabular-nums\">\r\r\n                        <span className=\"font-medium\">{stage.formatted}</span>\r\r\n                        {index > 0 && (\r\r\n                          <span className=\"text-muted-foreground ml-2 text-xs\">\r\r\n                            (-{stage.dropoffFormatted})\r\r\n                          </span>\r\r\n                        )}\r\r\n                      </div>\r\r\n                    </div>\r\r\n\r\r\n                    {/* Funnel Bar */}\r\r\n                    <div className=\"bg-muted h-8 w-full overflow-hidden rounded-md\">\r\r\n                      <div\r\r\n                        className={cn(\"h-full rounded-md\", stage.color)}\r\r\n                        style={{\r\r\n                          width: `${Math.max(\r\r\n                            (stage.value / maxValue) * 100,\r\r\n                            5,\r\r\n                          )}%`,\r\r\n                          transition: \"width 0.5s ease-out\",\r\r\n                        }}\r\r\n                      />\r\r\n                    </div>\r\r\n\r\r\n                    {/* Dropoff Arrow */}\r\r\n                    {index < currentFunnel.stages.length - 1 && (\r\r\n                      <div className=\"my-1 flex justify-center\">\r\r\n                        <svg\r\r\n                          width=\"24\"\r\r\n                          height=\"14\"\r\r\n                          viewBox=\"0 0 24 14\"\r\r\n                          fill=\"none\"\r\r\n                          xmlns=\"http://www.w3.org/2000/svg\"\r\r\n                          className=\"text-muted-foreground\"\r\r\n                        >\r\r\n                          <path\r\r\n                            d=\"M12 14L23.1244 0.5H0.875645L12 14Z\"\r\r\n                            fill=\"currentColor\"\r\r\n                          />\r\r\n                        </svg>\r\r\n                      </div>\r\r\n                    )}\r\r\n                  </div>\r\r\n                ))}\r\r\n              </div>\r\r\n            </CardContent>\r\r\n          </Card>\r\r\n        </div>\r\r\n\r\r\n        {/* Metrics Summary */}\r\r\n        <div className=\"grid grid-cols-1 gap-4 md:grid-cols-3\">\r\r\n          <Card className=\"gap-0\">\r\r\n            <CardHeader className=\"\">\r\r\n              <CardTitle className=\"text-muted-foreground text-sm font-medium\">\r\r\n                Conversion Rate\r\r\n              </CardTitle>\r\r\n            </CardHeader>\r\r\n            <CardContent>\r\r\n              <div className=\"text-2xl font-bold\">\r\r\n                {currentFunnel.metrics.conversionRate}\r\r\n              </div>\r\r\n              <p className=\"text-muted-foreground mt-1 text-xs\">\r\r\n                End-to-end conversion\r\r\n              </p>\r\r\n            </CardContent>\r\r\n          </Card>\r\r\n\r\r\n          <Card className=\"gap-0\">\r\r\n            <CardHeader className=\"\">\r\r\n              <CardTitle className=\"text-muted-foreground text-sm font-medium\">\r\r\n                Biggest Dropoff\r\r\n              </CardTitle>\r\r\n            </CardHeader>\r\r\n            <CardContent>\r\r\n              <div className=\"text-2xl font-bold\">\r\r\n                {currentFunnel.metrics.dropoffPoint}\r\r\n              </div>\r\r\n              <p className=\"text-muted-foreground mt-1 text-xs\">\r\r\n                Stage with highest abandonment\r\r\n              </p>\r\r\n            </CardContent>\r\r\n          </Card>\r\r\n\r\r\n          <Card className=\"gap-0\">\r\r\n            <CardHeader className=\"\">\r\r\n              <CardTitle className=\"text-muted-foreground text-sm font-medium\">\r\r\n                Improvement Opportunity\r\r\n              </CardTitle>\r\r\n            </CardHeader>\r\r\n            <CardContent>\r\r\n              <div className=\"text-2xl font-bold\">\r\r\n                {currentFunnel.metrics.totalOpportunity}\r\r\n              </div>\r\r\n              <p className=\"text-muted-foreground mt-1 text-xs\">\r\r\n                Potential value from improvement\r\r\n              </p>\r\r\n            </CardContent>\r\r\n          </Card>\r\r\n        </div>\r\r\n\r\r\n        {/* Action Button */}\r\r\n        <div className=\"mt-8 flex justify-center\">\r\r\n          <Button>Analyze Funnel Performance</Button>\r\r\n        </div>\r\r\n      </div>\r\r\n    </div>\r\r\n  );\r\r\n}\r\r\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "tags": [
      "stats"
    ]
  }
}