{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "ecommerce-bundle-upsells-stack",
  "type": "registry:block",
  "registryDependencies": [
    "https://ui.woilasoft.com/r/button.json",
    "https://ui.woilasoft.com/r/card.json"
  ],
  "files": [
    {
      "path": "registry/default/blocks/ecommerce-bundle-upsells-stack.tsx",
      "content": "\"use client\";\r\r\n\r\r\nimport { useState } from \"react\";\r\r\nimport Image from \"next/image\";\r\r\nimport { Minus, Plus } from \"lucide-react\";\r\r\nimport { Button } from \"@/registry/default/ui/button\";\r\r\nimport { Card, CardContent } from \"@/registry/default/ui/card\";\r\r\n\r\r\ninterface Product {\r\r\n  id: string;\r\r\n  name: string;\r\r\n  price: number;\r\r\n  originalPrice?: number;\r\r\n  image: string;\r\r\n  description?: string;\r\r\n}\r\r\n\r\r\ninterface UpsellBundleStackProps {\r\r\n  mainProduct: Product;\r\r\n  upsellItems: Product[];\r\r\n  bundleDiscount?: number;\r\r\n}\r\r\n\r\r\nexport default function UpsellBundleStack({\r\r\n  mainProduct = {\r\r\n    id: \"main-1\",\r\r\n    name: \"Premium Wireless Headphones\",\r\r\n    price: 199.99,\r\r\n    originalPrice: 249.99,\r\r\n    image: \"/placeholder.svg?height=300&width=300\",\r\r\n    description:\r\r\n      \"High-quality noise-canceling headphones with 30-hour battery life\",\r\r\n  },\r\r\n  upsellItems = [\r\r\n    {\r\r\n      id: \"upsell-1\",\r\r\n      name: \"Wireless Charging Case\",\r\r\n      price: 49.99,\r\r\n      originalPrice: 69.99,\r\r\n      image: \"/placeholder.svg?height=120&width=120\",\r\r\n    },\r\r\n    {\r\r\n      id: \"upsell-2\",\r\r\n      name: \"Premium Audio Cable\",\r\r\n      price: 29.99,\r\r\n      image: \"/placeholder.svg?height=120&width=120\",\r\r\n    },\r\r\n    {\r\r\n      id: \"upsell-3\",\r\r\n      name: \"Protective Carrying Case\",\r\r\n      price: 39.99,\r\r\n      originalPrice: 54.99,\r\r\n      image: \"/placeholder.svg?height=120&width=120\",\r\r\n    },\r\r\n  ],\r\r\n  bundleDiscount = 0.1,\r\r\n}: UpsellBundleStackProps) {\r\r\n  const [selectedItems, setSelectedItems] = useState<Set<string>>(\r\r\n    new Set([mainProduct.id]),\r\r\n  );\r\r\n\r\r\n  const handleItemToggle = (itemId: string, checked: boolean) => {\r\r\n    const newSelected = new Set(selectedItems);\r\r\n    if (checked) {\r\r\n      newSelected.add(itemId);\r\r\n    } else {\r\r\n      newSelected.delete(itemId);\r\r\n    }\r\r\n    setSelectedItems(newSelected);\r\r\n  };\r\r\n\r\r\n  const calculateTotal = () => {\r\r\n    let total = 0;\r\r\n    if (selectedItems.has(mainProduct.id)) {\r\r\n      total += mainProduct.price;\r\r\n    }\r\r\n    upsellItems.forEach((item) => {\r\r\n      if (selectedItems.has(item.id)) {\r\r\n        total += item.price;\r\r\n      }\r\r\n    });\r\r\n\r\r\n    // Apply bundle discount if more than one item is selected\r\r\n    if (selectedItems.size > 1) {\r\r\n      total = total * (1 - bundleDiscount);\r\r\n    }\r\r\n\r\r\n    return total;\r\r\n  };\r\r\n\r\r\n  const calculateSavings = () => {\r\r\n    let originalTotal = 0;\r\r\n    if (selectedItems.has(mainProduct.id)) {\r\r\n      originalTotal += mainProduct.originalPrice || mainProduct.price;\r\r\n    }\r\r\n    upsellItems.forEach((item) => {\r\r\n      if (selectedItems.has(item.id)) {\r\r\n        originalTotal += item.originalPrice || item.price;\r\r\n      }\r\r\n    });\r\r\n\r\r\n    const currentTotal = calculateTotal();\r\r\n    return originalTotal - currentTotal;\r\r\n  };\r\r\n\r\r\n  const selectedCount = selectedItems.size;\r\r\n  const savings = calculateSavings();\r\r\n\r\r\n  return (\r\r\n    <div className=\"mx-auto max-w-2xl px-4 py-8 md:py-12\">\r\r\n      <div className=\"mb-6 text-center sm:mb-8\">\r\r\n        <h2 className=\"text-foreground mb-2 text-xl font-bold sm:text-2xl\">\r\r\n          Complete Your Bundle\r\r\n        </h2>\r\r\n        <p className=\"text-muted-foreground text-sm sm:text-base\">\r\r\n          Save {Math.round(bundleDiscount * 100)}% when you buy together\r\r\n        </p>\r\r\n      </div>\r\r\n\r\r\n      <div className=\"space-y-3 sm:space-y-4\">\r\r\n        {/* Main Product */}\r\r\n        <Card className=\"border-primary/20 from-muted/50 to-muted border-2 bg-gradient-to-r shadow-lg\">\r\r\n          <CardContent className=\"p-4 sm:p-6\">\r\r\n            <div className=\"flex flex-col space-y-3 sm:flex-row sm:items-center sm:space-y-0 sm:space-x-4\">\r\r\n              <div className=\"flex items-start space-x-3 sm:space-x-4\">\r\r\n                <div className=\"relative flex-shrink-0\">\r\r\n                  <div className=\"border-primary h-16 w-16 overflow-hidden rounded-lg border-2 bg-white shadow-sm sm:h-20 sm:w-20\">\r\r\n                    <Image\r\r\n                      src={mainProduct.image || \"/placeholder.svg\"}\r\r\n                      alt={mainProduct.name}\r\r\n                      width={80}\r\r\n                      height={80}\r\r\n                      className=\"h-full w-full object-cover\"\r\r\n                    />\r\r\n                  </div>\r\r\n                </div>\r\r\n                <div className=\"min-w-0 flex-1\">\r\r\n                  <h3 className=\"text-foreground text-base leading-tight font-semibold sm:text-lg\">\r\r\n                    {mainProduct.name}\r\r\n                  </h3>\r\r\n                  {mainProduct.description && (\r\r\n                    <p className=\"text-muted-foreground mt-1 line-clamp-2 text-xs sm:text-sm\">\r\r\n                      {mainProduct.description}\r\r\n                    </p>\r\r\n                  )}\r\r\n                </div>\r\r\n              </div>\r\r\n              <div className=\"flex items-center justify-between sm:flex-col sm:items-end sm:justify-center\">\r\r\n                <div className=\"flex items-center space-x-2\">\r\r\n                  <span className=\"text-foreground text-lg font-bold sm:text-xl\">\r\r\n                    ${mainProduct.price.toFixed(2)}\r\r\n                  </span>\r\r\n                  {mainProduct.originalPrice && (\r\r\n                    <span className=\"text-muted-foreground text-xs line-through sm:text-sm\">\r\r\n                      ${mainProduct.originalPrice.toFixed(2)}\r\r\n                    </span>\r\r\n                  )}\r\r\n                </div>\r\r\n                <div className=\"bg-primary text-primary-foreground rounded-full px-2 py-1 text-xs font-medium sm:mt-1 sm:text-sm\">\r\r\n                  Selected\r\r\n                </div>\r\r\n              </div>\r\r\n            </div>\r\r\n          </CardContent>\r\r\n        </Card>\r\r\n\r\r\n        {/* Upsell Items */}\r\r\n        {upsellItems.map((item) => (\r\r\n          <Card\r\r\n            key={item.id}\r\r\n            className=\"shadow-md transition-shadow duration-200 hover:shadow-lg\"\r\r\n          >\r\r\n            <CardContent className=\"p-3 sm:p-4\">\r\r\n              <div className=\"flex items-center space-x-3 sm:space-x-4\">\r\r\n                <div className=\"relative flex-shrink-0\">\r\r\n                  <div\r\r\n                    className={`bg-muted h-12 w-12 overflow-hidden rounded-lg shadow-sm sm:h-16 sm:w-16 ${\r\r\n                      selectedItems.has(item.id)\r\r\n                        ? \"border-primary border-2\"\r\r\n                        : \"\"\r\r\n                    }`}\r\r\n                  >\r\r\n                    <Image\r\r\n                      src={item.image || \"/placeholder.svg\"}\r\r\n                      alt={item.name}\r\r\n                      width={64}\r\r\n                      height={64}\r\r\n                      className=\"h-full w-full object-cover\"\r\r\n                    />\r\r\n                  </div>\r\r\n                </div>\r\r\n                <div className=\"min-w-0 flex-1\">\r\r\n                  <h4 className=\"text-foreground text-sm leading-tight font-medium sm:text-base\">\r\r\n                    {item.name}\r\r\n                  </h4>\r\r\n                  <div className=\"mt-1 flex items-center space-x-2\">\r\r\n                    <span className=\"text-foreground text-base font-semibold sm:text-lg\">\r\r\n                      ${item.price.toFixed(2)}\r\r\n                    </span>\r\r\n                    {item.originalPrice && (\r\r\n                      <span className=\"text-muted-foreground text-xs line-through sm:text-sm\">\r\r\n                        ${item.originalPrice.toFixed(2)}\r\r\n                      </span>\r\r\n                    )}\r\r\n                  </div>\r\r\n                </div>\r\r\n                <div className=\"flex-shrink-0\">\r\r\n                  {selectedItems.has(item.id) ? (\r\r\n                    <Button\r\r\n                      variant={\"outline\"}\r\r\n                      size=\"sm\"\r\r\n                      onClick={() => handleItemToggle(item.id, false)}\r\r\n                    >\r\r\n                      <Minus className=\"mr-1 h-3 w-3 sm:h-4 sm:w-4\" />\r\r\n                      Remove\r\r\n                    </Button>\r\r\n                  ) : (\r\r\n                    <Button\r\r\n                      variant=\"outline\"\r\r\n                      size=\"sm\"\r\r\n                      onClick={() => handleItemToggle(item.id, true)}\r\r\n                    >\r\r\n                      <Plus className=\"mr-1 h-3 w-3 sm:h-4 sm:w-4\" />\r\r\n                      Add\r\r\n                    </Button>\r\r\n                  )}\r\r\n                </div>\r\r\n              </div>\r\r\n            </CardContent>\r\r\n          </Card>\r\r\n        ))}\r\r\n      </div>\r\r\n\r\r\n      {/* Bundle Summary */}\r\r\n      <Card className=\"border-border mt-4 border-2 shadow-lg sm:mt-6\">\r\r\n        <CardContent className=\"p-4 sm:p-6\">\r\r\n          <div className=\"space-y-3 sm:space-y-4\">\r\r\n            <div className=\"flex flex-col space-y-2 sm:flex-row sm:items-center sm:justify-between sm:space-y-0\">\r\r\n              <span className=\"text-foreground text-base font-medium sm:text-lg\">\r\r\n                Bundle Total ({selectedCount}{\" \"}\r\r\n                {selectedCount === 1 ? \"item\" : \"items\"})\r\r\n              </span>\r\r\n              <div className=\"text-left sm:text-right\">\r\r\n                <div className=\"text-foreground text-xl font-bold sm:text-2xl\">\r\r\n                  ${calculateTotal().toFixed(2)}\r\r\n                </div>\r\r\n                {savings > 0 && (\r\r\n                  <div className=\"text-sm font-medium text-emerald-600\">\r\r\n                    You save ${savings.toFixed(2)}\r\r\n                  </div>\r\r\n                )}\r\r\n              </div>\r\r\n            </div>\r\r\n\r\r\n            {selectedCount > 1 && (\r\r\n              <div className=\"flex items-center justify-center space-x-2 rounded-lg bg-emerald-50 p-2 text-xs text-emerald-600 sm:p-3 sm:text-sm dark:bg-emerald-900 dark:text-emerald-400\">\r\r\n                <Plus className=\"h-3 w-3 flex-shrink-0 sm:h-4 sm:w-4\" />\r\r\n                <span className=\"text-center font-medium\">\r\r\n                  Bundle discount applied: {Math.round(bundleDiscount * 100)}%\r\r\n                  off\r\r\n                </span>\r\r\n              </div>\r\r\n            )}\r\r\n\r\r\n            <Button\r\r\n              className=\"h-10 w-full text-base font-semibold sm:h-12 sm:text-lg\"\r\r\n              disabled={selectedCount === 0}\r\r\n            >\r\r\n              Add Selected to Cart\r\r\n            </Button>\r\r\n\r\r\n            <p className=\"text-muted-foreground text-center text-xs leading-relaxed\">\r\r\n              Free shipping on orders over $100 â€¢ 30-day return policy\r\r\n            </p>\r\r\n          </div>\r\r\n        </CardContent>\r\r\n      </Card>\r\r\n    </div>\r\r\n  );\r\r\n}\r\r\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "tags": [
      "ecommerce-bundle-upsells"
    ]
  }
}