{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "reset-password-email-otp-reset",
  "type": "registry:block",
  "registryDependencies": [
    "https://ui.woilasoft.com/r/alert.json",
    "https://ui.woilasoft.com/r/button.json",
    "https://ui.woilasoft.com/r/card.json",
    "https://ui.woilasoft.com/r/form.json",
    "https://ui.woilasoft.com/r/input.json",
    "https://ui.woilasoft.com/r/separator.json"
  ],
  "files": [
    {
      "path": "registry/default/blocks/reset-password-email-otp-reset.tsx",
      "content": "\"use client\";\r\r\n\r\r\nimport * as React from \"react\";\r\r\nimport Link from \"next/link\";\r\r\nimport { z } from \"zod\";\r\r\nimport { useForm } from \"react-hook-form\";\r\r\nimport { zodResolver } from \"@hookform/resolvers/zod\";\r\r\nimport {\r\r\n  ArrowRightIcon,\r\r\n  EyeIcon,\r\r\n  EyeOffIcon,\r\r\n  LockIcon,\r\r\n  MailIcon,\r\r\n  RefreshCwIcon,\r\r\n} from \"lucide-react\";\r\r\nimport { Button } from \"@/registry/default/ui/button\";\r\r\nimport {\r\r\n  Card,\r\r\n  CardContent,\r\r\n  CardDescription,\r\r\n  CardFooter,\r\r\n  CardHeader,\r\r\n  CardTitle,\r\r\n} from \"@/registry/default/ui/card\";\r\r\nimport {\r\r\n  Form,\r\r\n  FormControl,\r\r\n  FormDescription,\r\r\n  FormField,\r\r\n  FormItem,\r\r\n  FormLabel,\r\r\n  FormMessage,\r\r\n} from \"@/registry/default/ui/form\";\r\r\nimport { Input } from \"@/registry/default/ui/input\";\r\r\nimport { Separator } from \"@/registry/default/ui/separator\";\r\r\nimport { Alert, AlertDescription } from \"@/registry/default/ui/alert\";\r\r\n\r\r\n// Email form schema\r\r\nconst emailSchema = z.object({\r\r\n  email: z.string().email({ message: \"Please enter a valid email address\" }),\r\r\n});\r\r\n\r\r\n// OTP form schema\r\r\nconst otpSchema = z.object({\r\r\n  otp: z\r\r\n    .string()\r\r\n    .min(6, { message: \"OTP must be at least 6 characters\" })\r\r\n    .max(6, { message: \"OTP must be exactly 6 characters\" })\r\r\n    .regex(/^\\d+$/, { message: \"OTP must contain only numbers\" }),\r\r\n});\r\r\n\r\r\n// Password form schema\r\r\nconst passwordSchema = z\r\r\n  .object({\r\r\n    password: z\r\r\n      .string()\r\r\n      .min(8, { message: \"Password must be at least 8 characters\" })\r\r\n      .regex(/[A-Z]/, {\r\r\n        message: \"Password must contain at least one uppercase letter\",\r\r\n      })\r\r\n      .regex(/[a-z]/, {\r\r\n        message: \"Password must contain at least one lowercase letter\",\r\r\n      })\r\r\n      .regex(/[0-9]/, { message: \"Password must contain at least one number\" }),\r\r\n    confirmPassword: z.string(),\r\r\n  })\r\r\n  .refine((data) => data.password === data.confirmPassword, {\r\r\n    message: \"Passwords do not match\",\r\r\n    path: [\"confirmPassword\"],\r\r\n  });\r\r\n\r\r\ntype EmailFormValues = z.infer<typeof emailSchema>;\r\r\ntype OTPFormValues = z.infer<typeof otpSchema>;\r\r\ntype PasswordFormValues = z.infer<typeof passwordSchema>;\r\r\n\r\r\nexport default function EmailOTPReset() {\r\r\n  const [activeStep, setActiveStep] = React.useState<\r\r\n    \"email\" | \"otp\" | \"password\" | \"success\"\r\r\n  >(\"email\");\r\r\n  const [email, setEmail] = React.useState(\"\");\r\r\n  const [countdown, setCountdown] = React.useState(0);\r\r\n  const [isPasswordVisible, setIsPasswordVisible] = React.useState(false);\r\r\n  const [isConfirmPasswordVisible, setIsConfirmPasswordVisible] =\r\r\n    React.useState(false);\r\r\n\r\r\n  // Initialize countdown timer\r\r\n  React.useEffect(() => {\r\r\n    if (countdown > 0) {\r\r\n      const timer = setTimeout(() => {\r\r\n        setCountdown(countdown - 1);\r\r\n      }, 1000);\r\r\n      return () => clearTimeout(timer);\r\r\n    }\r\r\n  }, [countdown]);\r\r\n\r\r\n  // Email form\r\r\n  const emailForm = useForm<EmailFormValues>({\r\r\n    resolver: zodResolver(emailSchema),\r\r\n    defaultValues: {\r\r\n      email: \"\",\r\r\n    },\r\r\n  });\r\r\n\r\r\n  // OTP form\r\r\n  const otpForm = useForm<OTPFormValues>({\r\r\n    resolver: zodResolver(otpSchema),\r\r\n    defaultValues: {\r\r\n      otp: \"\",\r\r\n    },\r\r\n  });\r\r\n\r\r\n  // Password form\r\r\n  const passwordForm = useForm<PasswordFormValues>({\r\r\n    resolver: zodResolver(passwordSchema),\r\r\n    defaultValues: {\r\r\n      password: \"\",\r\r\n      confirmPassword: \"\",\r\r\n    },\r\r\n  });\r\r\n\r\r\n  function onSubmitEmail(data: EmailFormValues) {\r\r\n    console.log(\"Email submitted:\", data);\r\r\n    setEmail(data.email);\r\r\n    setActiveStep(\"otp\");\r\r\n    setCountdown(60); // Start 60-second countdown\r\r\n  }\r\r\n\r\r\n  function onSubmitOTP(data: OTPFormValues) {\r\r\n    console.log(\"OTP submitted:\", data);\r\r\n    setActiveStep(\"password\");\r\r\n  }\r\r\n\r\r\n  function onSubmitPassword(data: PasswordFormValues) {\r\r\n    console.log(\"Password submitted:\", data);\r\r\n    setActiveStep(\"success\");\r\r\n  }\r\r\n\r\r\n  function resendOTP() {\r\r\n    setCountdown(60); // Reset countdown\r\r\n  }\r\r\n\r\r\n  const togglePasswordVisibility = () => {\r\r\n    setIsPasswordVisible(!isPasswordVisible);\r\r\n  };\r\r\n\r\r\n  const toggleConfirmPasswordVisibility = () => {\r\r\n    setIsConfirmPasswordVisible(!isConfirmPasswordVisible);\r\r\n  };\r\r\n\r\r\n  return (\r\r\n    <div className=\"container mx-auto px-4 py-12 md:px-6 md:py-16\">\r\r\n      <div className=\"flex flex-col gap-8 lg:flex-row lg:gap-12\">\r\r\n        {/* Left side: Illustration + Text */}\r\r\n        <div className=\"flex flex-col justify-center lg:w-1/2\">\r\r\n          <h2 className=\"mb-2 text-3xl font-bold tracking-tight\">\r\r\n            Account Recovery\r\r\n          </h2>\r\r\n          <p className=\"text-muted-foreground mb-6\">\r\r\n            Securely reset your password in three simple steps. We&apos;ll send\r\r\n            you a one-time password to verify your email, then you can set a new\r\r\n            password for your account.\r\r\n          </p>\r\r\n          <div className=\"space-y-4\">\r\r\n            <div className=\"flex gap-3\">\r\r\n              <div className=\"bg-primary text-primary-foreground flex h-7 w-7 items-center justify-center rounded-full text-xs font-medium\">\r\r\n                1\r\r\n              </div>\r\r\n              <div>\r\r\n                <h3 className=\"font-medium\">Verify Email</h3>\r\r\n                <p className=\"text-muted-foreground text-sm\">\r\r\n                  Enter your account email\r\r\n                </p>\r\r\n              </div>\r\r\n            </div>\r\r\n            <div className=\"flex gap-3\">\r\r\n              <div className=\"bg-primary/20 text-primary flex h-7 w-7 items-center justify-center rounded-full text-xs font-medium\">\r\r\n                2\r\r\n              </div>\r\r\n              <div>\r\r\n                <h3 className=\"font-medium\">Enter OTP</h3>\r\r\n                <p className=\"text-muted-foreground text-sm\">\r\r\n                  Enter the 6-digit code sent to your email\r\r\n                </p>\r\r\n              </div>\r\r\n            </div>\r\r\n            <div className=\"flex gap-3\">\r\r\n              <div className=\"bg-primary/20 text-primary flex h-7 w-7 items-center justify-center rounded-full text-xs font-medium\">\r\r\n                3\r\r\n              </div>\r\r\n              <div>\r\r\n                <h3 className=\"font-medium\">New Password</h3>\r\r\n                <p className=\"text-muted-foreground text-sm\">\r\r\n                  Create a new secure password\r\r\n                </p>\r\r\n              </div>\r\r\n            </div>\r\r\n          </div>\r\r\n        </div>\r\r\n\r\r\n        {/* Right side: Form */}\r\r\n        <div className=\"lg:w-1/2\">\r\r\n          <Card className=\"border-2\">\r\r\n            <CardHeader>\r\r\n              <div className=\"flex items-center justify-between\">\r\r\n                <div>\r\r\n                  <CardTitle className=\"text-2xl\">Reset Password</CardTitle>\r\r\n                  <CardDescription>\r\r\n                    Secure your account with a new password\r\r\n                  </CardDescription>\r\r\n                </div>\r\r\n                <div className=\"bg-primary/10 flex h-10 w-10 items-center justify-center rounded-full\">\r\r\n                  <LockIcon className=\"text-primary h-5 w-5\" />\r\r\n                </div>\r\r\n              </div>\r\r\n              <Separator className=\"mt-6\" />\r\r\n            </CardHeader>\r\r\n\r\r\n            <CardContent>\r\r\n              {activeStep === \"email\" && (\r\r\n                <Form {...emailForm}>\r\r\n                  <form\r\r\n                    onSubmit={emailForm.handleSubmit(onSubmitEmail)}\r\r\n                    className=\"space-y-4\"\r\r\n                  >\r\r\n                    <Alert className=\"mb-6 bg-blue-50 text-blue-800 dark:bg-blue-900 dark:text-blue-300\">\r\r\n                      <AlertDescription>\r\r\n                        Enter the email address associated with your account.\r\r\n                        We&apos;ll send you a verification code.\r\r\n                      </AlertDescription>\r\r\n                    </Alert>\r\r\n\r\r\n                    <FormField\r\r\n                      control={emailForm.control}\r\r\n                      name=\"email\"\r\r\n                      render={({ field }) => (\r\r\n                        <FormItem>\r\r\n                          <FormLabel>Email Address</FormLabel>\r\r\n                          <div className=\"relative\">\r\r\n                            <FormControl>\r\r\n                              <Input\r\r\n                                placeholder=\"name@example.com\"\r\r\n                                type=\"email\"\r\r\n                                {...field}\r\r\n                                className=\"pl-10\"\r\r\n                              />\r\r\n                            </FormControl>\r\r\n                            <MailIcon className=\"text-muted-foreground absolute top-1/2 left-3 h-4 w-4 -translate-y-1/2\" />\r\r\n                          </div>\r\r\n                          <FormMessage />\r\r\n                        </FormItem>\r\r\n                      )}\r\r\n                    />\r\r\n                    <Button type=\"submit\" className=\"w-full\">\r\r\n                      Send Verification Code{\" \"}\r\r\n                      <ArrowRightIcon className=\"ml-2 h-4 w-4\" />\r\r\n                    </Button>\r\r\n                  </form>\r\r\n                </Form>\r\r\n              )}\r\r\n\r\r\n              {activeStep === \"otp\" && (\r\r\n                <Form {...otpForm}>\r\r\n                  <form\r\r\n                    onSubmit={otpForm.handleSubmit(onSubmitOTP)}\r\r\n                    className=\"space-y-4\"\r\r\n                  >\r\r\n                    <Alert className=\"mb-6\">\r\r\n                      <AlertDescription>\r\r\n                        We&apos;ve sent a 6-digit verification code to{\" \"}\r\r\n                        <span className=\"font-medium\">{email}</span>. Please\r\r\n                        check your inbox and spam folder.\r\r\n                      </AlertDescription>\r\r\n                    </Alert>\r\r\n\r\r\n                    <FormField\r\r\n                      control={otpForm.control}\r\r\n                      name=\"otp\"\r\r\n                      render={({ field }) => (\r\r\n                        <FormItem>\r\r\n                          <FormLabel>Verification Code</FormLabel>\r\r\n                          <FormControl>\r\r\n                            <Input\r\r\n                              placeholder=\"123456\"\r\r\n                              maxLength={6}\r\r\n                              className=\"text-center text-lg tracking-widest\"\r\r\n                              {...field}\r\r\n                            />\r\r\n                          </FormControl>\r\r\n                          <FormDescription>\r\r\n                            Enter the 6-digit code we sent to your email\r\r\n                          </FormDescription>\r\r\n                          <FormMessage />\r\r\n                        </FormItem>\r\r\n                      )}\r\r\n                    />\r\r\n\r\r\n                    <Button type=\"submit\" className=\"w-full\">\r\r\n                      Verify Code\r\r\n                    </Button>\r\r\n\r\r\n                    <div className=\"text-center\">\r\r\n                      <p className=\"text-muted-foreground text-sm\">\r\r\n                        Didn&apos;t receive the code?{\" \"}\r\r\n                        {countdown > 0 ? (\r\r\n                          <span>Resend in {countdown}s</span>\r\r\n                        ) : (\r\r\n                          <Button\r\r\n                            variant=\"link\"\r\r\n                            className=\"h-auto p-0 text-sm\"\r\r\n                            onClick={resendOTP}\r\r\n                          >\r\r\n                            Resend code{\" \"}\r\r\n                            <RefreshCwIcon className=\"ml-1 h-3 w-3\" />\r\r\n                          </Button>\r\r\n                        )}\r\r\n                      </p>\r\r\n                    </div>\r\r\n                  </form>\r\r\n                </Form>\r\r\n              )}\r\r\n\r\r\n              {activeStep === \"password\" && (\r\r\n                <Form {...passwordForm}>\r\r\n                  <form\r\r\n                    onSubmit={passwordForm.handleSubmit(onSubmitPassword)}\r\r\n                    className=\"space-y-4\"\r\r\n                  >\r\r\n                    <div className=\"text-muted-foreground mb-4 text-sm\">\r\r\n                      Create a strong password with a mix of letters, numbers,\r\r\n                      and symbols.\r\r\n                    </div>\r\r\n\r\r\n                    <FormField\r\r\n                      control={passwordForm.control}\r\r\n                      name=\"password\"\r\r\n                      render={({ field }) => (\r\r\n                        <FormItem>\r\r\n                          <FormLabel>New Password</FormLabel>\r\r\n                          <div className=\"relative\">\r\r\n                            <FormControl>\r\r\n                              <Input\r\r\n                                placeholder=\"••••••••\"\r\r\n                                type={isPasswordVisible ? \"text\" : \"password\"}\r\r\n                                {...field}\r\r\n                              />\r\r\n                            </FormControl>\r\r\n                            <Button\r\r\n                              type=\"button\"\r\r\n                              variant=\"ghost\"\r\r\n                              size=\"icon\"\r\r\n                              className=\"text-muted-foreground absolute top-0 right-0 h-full px-3 py-2\"\r\r\n                              onClick={togglePasswordVisibility}\r\r\n                            >\r\r\n                              {isPasswordVisible ? (\r\r\n                                <EyeOffIcon className=\"h-4 w-4\" />\r\r\n                              ) : (\r\r\n                                <EyeIcon className=\"h-4 w-4\" />\r\r\n                              )}\r\r\n                              <span className=\"sr-only\">\r\r\n                                Toggle password visibility\r\r\n                              </span>\r\r\n                            </Button>\r\r\n                          </div>\r\r\n                          <FormDescription>\r\r\n                            Must have at least 8 characters with uppercase,\r\r\n                            lowercase, and number\r\r\n                          </FormDescription>\r\r\n                          <FormMessage />\r\r\n                        </FormItem>\r\r\n                      )}\r\r\n                    />\r\r\n\r\r\n                    <FormField\r\r\n                      control={passwordForm.control}\r\r\n                      name=\"confirmPassword\"\r\r\n                      render={({ field }) => (\r\r\n                        <FormItem>\r\r\n                          <FormLabel>Confirm Password</FormLabel>\r\r\n                          <div className=\"relative\">\r\r\n                            <FormControl>\r\r\n                              <Input\r\r\n                                placeholder=\"••••••••\"\r\r\n                                type={\r\r\n                                  isConfirmPasswordVisible ? \"text\" : \"password\"\r\r\n                                }\r\r\n                                {...field}\r\r\n                              />\r\r\n                            </FormControl>\r\r\n                            <Button\r\r\n                              type=\"button\"\r\r\n                              variant=\"ghost\"\r\r\n                              size=\"icon\"\r\r\n                              className=\"text-muted-foreground absolute top-0 right-0 h-full px-3 py-2\"\r\r\n                              onClick={toggleConfirmPasswordVisibility}\r\r\n                            >\r\r\n                              {isConfirmPasswordVisible ? (\r\r\n                                <EyeOffIcon className=\"h-4 w-4\" />\r\r\n                              ) : (\r\r\n                                <EyeIcon className=\"h-4 w-4\" />\r\r\n                              )}\r\r\n                              <span className=\"sr-only\">\r\r\n                                Toggle confirm password visibility\r\r\n                              </span>\r\r\n                            </Button>\r\r\n                          </div>\r\r\n                          <FormMessage />\r\r\n                        </FormItem>\r\r\n                      )}\r\r\n                    />\r\r\n\r\r\n                    <Button type=\"submit\" className=\"w-full\">\r\r\n                      Reset Password\r\r\n                    </Button>\r\r\n                  </form>\r\r\n                </Form>\r\r\n              )}\r\r\n\r\r\n              {activeStep === \"success\" && (\r\r\n                <div className=\"space-y-6 py-4 text-center\">\r\r\n                  <div className=\"mx-auto flex h-16 w-16 items-center justify-center rounded-full bg-green-100\">\r\r\n                    <svg\r\r\n                      className=\"h-8 w-8 text-green-600\"\r\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\r\n                      fill=\"none\"\r\r\n                      viewBox=\"0 0 24 24\"\r\r\n                      stroke=\"currentColor\"\r\r\n                    >\r\r\n                      <path\r\r\n                        strokeLinecap=\"round\"\r\r\n                        strokeLinejoin=\"round\"\r\r\n                        strokeWidth={2}\r\r\n                        d=\"M5 13l4 4L19 7\"\r\r\n                      />\r\r\n                    </svg>\r\r\n                  </div>\r\r\n                  <div>\r\r\n                    <h3 className=\"text-xl font-medium\">\r\r\n                      Password Reset Successful\r\r\n                    </h3>\r\r\n                    <p className=\"text-muted-foreground mt-2\">\r\r\n                      Your password has been updated successfully. You can now\r\r\n                      login with your new credentials.\r\r\n                    </p>\r\r\n                  </div>\r\r\n                  <Button asChild className=\"w-full\">\r\r\n                    <Link href=\"#\">Sign in</Link>\r\r\n                  </Button>\r\r\n                </div>\r\r\n              )}\r\r\n            </CardContent>\r\r\n\r\r\n            <CardFooter className=\"flex justify-center border-t p-6\">\r\r\n              {activeStep !== \"success\" && (\r\r\n                <p className=\"text-muted-foreground text-sm\">\r\r\n                  Remember your password?{\" \"}\r\r\n                  <Link href=\"#\" className=\"text-primary font-medium\">\r\r\n                    Sign in\r\r\n                  </Link>\r\r\n                </p>\r\r\n              )}\r\r\n            </CardFooter>\r\r\n          </Card>\r\r\n        </div>\r\r\n      </div>\r\r\n    </div>\r\r\n  );\r\r\n}\r\r\n",
      "type": "registry:block"
    }
  ],
  "meta": {
    "tags": [
      "reset-password"
    ]
  }
}